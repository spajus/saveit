<%- if not current_user %>
window.location.assign('<%= url_for controller: :home, only_path: false %>');
<%- else -%>
el=document.createElement('div');
el.setAttribute('id','bm-notification-id');

el.innerHTML = '<%= render('bookmark-div').gsub(/\s*\n/, '').html_safe %>';
document.body.appendChild(el);


function submitForm(){
    var elms = document.getElementById("saveitin-form").elements;
    var title = elms[name="bookmark[title]"].value;
    var description = elms[name="bookmark[description]"].value;
    var tags = elms[name="bookmark[tags]"].value;
    var url = 'http://localhost:3000/zimg/' + <%= @bookmark.id %> + '?title=' + encodeURIComponent(title) +'&description=' +encodeURIComponent(description) + '&tags=' +encodeURIComponent(tags);

    var img = document.createElement("img");
    img.setAttribute('src', url);
    img.setAttribute('alt', 'na');
    img.setAttribute('height', '1px');
    img.setAttribute('width', '1px');
    document.body.appendChild(img);
    var bm_div = document.getElementById('bm-notification-id');
    document.body.removeChild(bm_div);
    return false;
}


//setTimeout('removeBmPopup()', 4000);

function removeBmPopup() {
  if ( n = document.getElementById('bm-notification-id')) {
    document.body.removeChild(n);
  }
}
<%- end %>